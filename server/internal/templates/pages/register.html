{{ define "register-page"}}
<div class="register-form-container">
  <h2>Register New Account</h2>
  <form hx-post="./register" hx-target="#tracker-content">
    <div class="form-group">
      <label for="username">Username:</label>
      <input type="text" id="username" name="username" class="form-control" placeholder="Choose a username"
        minlength="3" maxlength="50" required />
    </div>

    <div class="form-group">
      <label for="password">Password:</label>
      <input type="password" id="password" name="password" class="form-control" placeholder="Choose a password"
        minlength="6" required />
    </div>

    <div class="form-group">
      <label for="confirm_password">Confirm Password:</label>
      <input type="password" id="confirm_password" name="confirm_password" class="form-control"
        placeholder="Confirm your password" minlength="6" required />
      <small id="password-match-feedback" style="color: red"></small>
    </div>

    <button type="submit" class="btn btn-primary">Register</button>
  </form>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const passwordField = document.getElementById("password");
    const confirmPasswordField = document.getElementById("confirm_password");
    const feedback = document.getElementById("password-match-feedback");

    function checkPasswords() {
      if (
        passwordField.value !== confirmPasswordField.value &&
        confirmPasswordField.value !== ""
      ) {
        feedback.textContent = "Passwords do not match!";
        confirmPasswordField.setCustomValidity("Passwords do not match");
      } else {
        feedback.textContent = "";
        confirmPasswordField.setCustomValidity("");
      }
    }

    if (passwordField && confirmPasswordField && feedback) {
      passwordField.addEventListener("keyup", checkPasswords);
      confirmPasswordField.addEventListener("keyup", checkPasswords);
    }
  });
</script>
{{end}}
